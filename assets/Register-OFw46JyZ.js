import{w as f,v as g,a as j,o as e,t as N}from"./chunk-NL6KNZEE-D71spLCj.js";import{u as b}from"./AuthContext-CpWodBBB.js";const F=f(function(){const{login:h}=b(),m=g(),[l,t]=j.useState("");async function x(n){n.preventDefault(),t("");const u=n.currentTarget,s=new FormData(u),i=s.get("username"),p=s.get("email"),o=s.get("password"),w=s.get("2password");if(o!==w){t("Пароли не совпадают");return}try{const a=await fetch("http://127.0.0.1:8000/auth/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i,email:p,password:o})});if(!a.ok)throw new Error("Ошибка регистрации");const r=await a.json(),c=await fetch("http://127.0.0.1:8000/auth/me",{headers:{Authorization:`Bearer ${r.access_token}`}});let d={username:i};c.ok&&(d=await c.json()),h(r.access_token,r.refresh_token,d),m("/me")}catch{t("Ошибка регистрации. Проверьте данные.")}}return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-2",children:"Создать аккаунт"}),e.jsxs("form",{className:"flex flex-col gap-2",onSubmit:x,children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"username",className:"text-white/50",children:"Имя пользователя"}),e.jsx("input",{type:"text",id:"username",name:"username",required:!0,className:"w-full h-12 rounded-lg bg-white/10 px-2"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"email",className:"text-white/50",children:"E-Mail"}),e.jsx("input",{type:"email",id:"email",name:"email",required:!0,className:"w-full h-12 rounded-lg bg-white/10 px-2"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"password",className:"text-white/50",children:"Пароль"}),e.jsx("input",{type:"password",id:"password",name:"password",required:!0,className:"w-full h-12 rounded-lg bg-white/10 px-2"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"2password",className:"text-white/50",children:"Повторите пароль"}),e.jsx("input",{type:"password",id:"2password",name:"2password",required:!0,className:"w-full h-12 rounded-lg bg-white/10 px-2"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"date",className:"text-white/50",children:"Дата рождения"}),e.jsx("input",{type:"date",id:"date",name:"date",required:!0,className:"w-full h-12 rounded-lg bg-white/10 px-2"})]}),e.jsx("button",{type:"submit",className:"w-full h-12 bg-black/75 font-semibold rounded-lg hover:bg-black",children:"Продолжить"}),e.jsxs("span",{className:"text-white/50",children:["Нажав на кнопку “Продолжить”, вы подтверждаете что ознокомились и согласны с",e.jsx("a",{className:"text-sky-500",href:"#",children:" Условиями использования"})," и",e.jsx("a",{className:"text-sky-500",href:"#",children:" Политиеой конфедициальности"})," Speeksu"]}),e.jsxs("span",{className:"text-white/50 text-right",children:["Уже есть аккаунт? ",e.jsx(N,{className:"text-sky-500",to:"/auth/login",children:"Войти"})]})]}),l&&e.jsx("div",{className:"text-red-500 text-center mt-2",children:l})]})});export{F as default};
