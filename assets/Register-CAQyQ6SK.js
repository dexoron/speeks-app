import{w as g,v as j,a as N,o as e,t as b}from"./chunk-NL6KNZEE-D71spLCj.js";import{u as y,a as m}from"./AuthContext-z9X0gYbi.js";const S=g(function(){const{login:h}=y(),x=j(),[l,t]=N.useState("");async function u(n){n.preventDefault(),t("");const p=n.currentTarget,s=new FormData(p),i=s.get("username"),w=s.get("email"),o=s.get("password"),f=s.get("2password");if(o!==f){t("Пароли не совпадают");return}try{const a=await fetch(`${m}/auth/register/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i,email:w,password:o})});if(!a.ok)throw new Error("Ошибка регистрации");const r=await a.json(),c=await fetch(`${m}/auth/me`,{headers:{Authorization:`Bearer ${r.access_token}`}});let d={username:i};c.ok&&(d=await c.json()),h(r.access_token,r.refresh_token,d),x("/me")}catch{t("Ошибка регистрации. Проверьте данные.")}}return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-2",children:"Создать аккаунт"}),e.jsxs("form",{className:"flex flex-col gap-2",onSubmit:u,children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"username",className:"text-white/50",children:"Имя пользователя"}),e.jsx("input",{type:"text",id:"username",name:"username",required:!0,className:"w-full h-12 rounded-lg bg-white/10 px-2"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"email",className:"text-white/50",children:"E-Mail"}),e.jsx("input",{type:"email",id:"email",name:"email",required:!0,className:"w-full h-12 rounded-lg bg-white/10 px-2"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"password",className:"text-white/50",children:"Пароль"}),e.jsx("input",{type:"password",id:"password",name:"password",required:!0,className:"w-full h-12 rounded-lg bg-white/10 px-2"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"2password",className:"text-white/50",children:"Повторите пароль"}),e.jsx("input",{type:"password",id:"2password",name:"2password",required:!0,className:"w-full h-12 rounded-lg bg-white/10 px-2"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"date",className:"text-white/50",children:"Дата рождения"}),e.jsx("input",{type:"date",id:"date",name:"date",required:!0,className:"w-full h-12 rounded-lg bg-white/10 px-2"})]}),e.jsx("button",{type:"submit",className:"w-full h-12 bg-black/75 font-semibold rounded-lg hover:bg-black",children:"Продолжить"}),e.jsxs("span",{className:"text-white/50",children:["Нажав на кнопку “Продолжить”, вы подтверждаете что ознокомились и согласны с",e.jsx("a",{className:"text-sky-500",href:"#",children:" Условиями использования"})," и",e.jsx("a",{className:"text-sky-500",href:"#",children:" Политиеой конфедициальности"})," Speeksu"]}),e.jsxs("span",{className:"text-white/50 text-right",children:["Уже есть аккаунт? ",e.jsx(b,{className:"text-sky-500",to:"/auth/login",children:"Войти"})]})]}),l&&e.jsx("div",{className:"text-red-500 text-center mt-2",children:l})]})});export{S as default};
